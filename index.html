<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Birthday!</title>
<link href="https://fonts.googleapis.com/css2?family=Shrikhand&display=swap" rel="stylesheet">
<style>
body {
  margin: 0; font-family: 'Shrikhand', cursive; overflow: hidden;
  background: linear-gradient(-45deg, #1e1e2f, #3a3a5c, #2b2b45, #4d4d7a);
  background-size: 400% 400%; animation: gradientBG 20s ease infinite; color: gold;
}
@keyframes gradientBG {0% { background-position:0% 50%; } 50% { background-position:100% 50%; } 100% { background-position:0% 50%; }}

section { display:none; min-height:100vh; padding:50px; text-align:center; background-size:cover; background-position:center; opacity:0; transition: opacity 1s ease; }
section.active { display:block; opacity:1; }

#password-screen { position: fixed; top:0; left:0; width:100%; height:100%; display:flex; flex-direction:column; justify-content:center; align-items:center; background:#2b2b45; z-index:1000; text-align:center; }
#password-screen input { padding:10px 15px; border-radius:10px; border:none; margin-top:10px; font-size:18px; text-align:center; }
#password-screen button { margin-top:15px; padding:10px 20px; font-size:18px; border:none; border-radius:10px; background:gold; cursor:pointer; }
#password-screen button:hover { background:#ffdf70; }
#password-error { color:red; display:none; margin-top:10px; }

#countdown-screen { position: fixed; top:0; left:0; width:100%; height:100%; display:flex; justify-content:center; align-items:center; font-size:100px; color:gold; background:#2b2b45; z-index:900; }

#birthday { background: radial-gradient(ellipse at bottom,#111 0%,#1e1e2f 100%); position:relative; overflow:hidden; }
canvas#fireworks { position:absolute; top:0; left:0; width:100%; height:100%; z-index:0;}
#banner,#cake,#birthday-text,#wishes-text { position:relative; z-index:10; text-align:center; color:gold; text-shadow:2px 2px 8px #ffcc66; }
#banner { font-size:50px; margin-top:50px; }
#cake { font-size:100px; margin-top:20px; animation: float 2s infinite ease-in-out; }
@keyframes float {0%,100%{transform:translateY(0);}50%{transform:translateY(-20px);}}

.typing { display:inline-block; overflow:hidden; white-space:pre-wrap; border-right:3px solid gold; font-size:28px; margin-top:15px; min-height:50px; line-height:1.5em; }

.card { width:350px; min-height:200px; margin:20px auto; background:#000; border-radius:20px; padding:20px; transform-style:preserve-3d; transition:transform 1s; cursor:pointer; color:gold; perspective:1000px; box-shadow:0 8px 20px rgba(0,0,0,0.7); position:relative; }
.card.open { transform: rotateY(180deg); }
.card .front, .card .back { position:absolute; width:100%; backface-visibility:hidden; border-radius:20px; display:flex; flex-direction:column; padding:20px; box-sizing:border-box; overflow-y:auto; max-height:400px; }
.card .back { transform:rotateY(180deg); background:#000; text-align:left; box-shadow: inset 0 0 10px rgba(255,255,255,0.1); }

.heart { position:absolute; width:20px; height:20px; pointer-events:none; background:url('data:image/svg+xml;utf8,<svg fill="pink" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 29.6"><path d="M23.6,0C21.4,0,19.3,1.1,18,2.9C16.7,1.1,14.6,0,12.4,0C7.2,0,3.1,4.1,3.1,9.2c0,5.6,9.5,12.3,14.9,17.8c0.3,0.3,0.8,0.3,1.1,0C19.4,21.5,28.9,14.8,28.9,9.2C28.9,4.1,24.8,0,23.6,0z"/></svg>') no-repeat center center; background-size:contain; animation: floatHeart 2s ease-in-out forwards; }
@keyframes floatHeart {0%{transform:translateY(0) scale(1);opacity:1;}100%{transform:translateY(-200px) scale(0.5);opacity:0;}}

section video { width:100%; max-width:800px; max-height:70vh; border-radius:15px; box-shadow:0 0 20px rgba(255,182,193,0.7); border:3px solid #ffb6c1; }

#stars { position: fixed; top:0; left:0; width:100vw; height:100vh; pointer-events:none; z-index:0; overflow:hidden; }
.star { position:absolute; width:3px; height:3px; background:white; border-radius:50%; opacity:0; animation: twinkle 3s infinite ease-in-out; }
@keyframes twinkle {0%,100%{opacity:0;transform:scale(0.5);}50%{opacity:1;transform:scale(1.5);} }

#memories-sequence { display:none; flex-direction:column; justify-content:center; align-items:center; text-align:center; background:#2b2b45; min-height:100vh; padding:50px 20px; box-sizing:border-box; }
#memories-sequence.active { display:flex; opacity:1; }
.memory-container { display:none; width:90%; max-width:800px; margin:20px auto; border-radius:15px; box-shadow:0 0 15px rgba(255,182,193,0.5); overflow:hidden; max-height:70vh; }
.memory-container img, .memory-container video { width:100%; height:auto; max-height:70vh; object-fit:contain; border-radius:15px; }
.memory-container.active { display:block; animation: fadeIn 1s ease; }
@keyframes fadeIn { from {opacity:0; transform:scale(0.97);} to {opacity:1; transform:scale(1);} }

</style>
</head>
<body>

<audio id="bg-music" loop><source src="romantic-piano-solo-420330.mp3" type="audio/mp3"></audio>
<audio id="firework-sound"><source src="firework.mp3" type="audio/mp3"></audio>

<!-- Password -->
<div id="password-screen">
  <h1>Enter Password ğŸ‰</h1>
  <p>What's your name given by me? (all lowercase)</p>
  <input id="password-input" placeholder="Type here...">
  <button onclick="checkPassword()">Enter</button>
  <p id="password-error">Wrong password!</p>
</div>

<!-- Countdown -->
<div id="countdown-screen"></div>

<!-- Birthday Section -->
<section id="birthday">
  <canvas id="fireworks"></canvas>
  <div id="banner" class="typing"></div>
  <div id="cake">ğŸ‚</div>
  <div id="birthday-text" class="typing"></div>
  <div id="wishes-text" class="typing"></div>
</section>

<!-- Message -->
<section id="message">
  <h1 class="typing">A Special Message ğŸ’Œ</h1>
  <video controls><source src="special_message.mp4" type="video/mp4"></video>
</section>

<!-- Letter -->
<section id="letter">
  <h1 class="typing">A Special Letter ğŸ’–</h1>
  <div class="card">
    <div class="front">Click to Open Card</div>
    <div class="back" id="card-message"></div>
  </div>
</section>

<!-- Birthday Videos -->
<section id="birthday-boy">
  <h1 class="typing">My Birthday Boy ğŸ¥°</h1>
  <video width="600" controls><source src="video2.mp4" type="video/mp4"></video>
</section>

<section id="birthday-boy-hot">
  <h1 class="typing" id="birthday-boy-hot-heading">Warning: Too Hot to Handle ğŸ˜ğŸ”¥</h1>
  <video width="600" controls><source src="video1.mp4" type="video/mp4"></video>
</section>

<!-- Memories -->
<section id="memories-sequence">
  <h1 class="typing">Our Sweet Memories ğŸŒ¹</h1>
  <div class="memory-container"><img src="memory6.jpg"></div>
  <div class="memory-container"><img src="memory9.jpg"></div>
  <div class="memory-container"><img src="memory8.jpg"></div>
  <div class="memory-container"><img src="memory7.jpg"></div>
  <div class="memory-container"><video><source src="memory4.mp4" type="video/mp4"></video></div>
  <div class="memory-container"><video><source src="memory5.mp4" type="video/mp4"></video></div>
</section>

<div id="stars"></div>

<script>
// --- Global Variables ---
const sections = ['birthday','message','letter','birthday-boy','birthday-boy-hot','memories-sequence'];
const bgMusic = document.getElementById('bg-music');
const canvas = document.getElementById('fireworks');
const ctx = canvas.getContext('2d');
let particles = [];
canvas.width = innerWidth; 
canvas.height = innerHeight;
let resolveCard; // Resolver for card click

function createStars(count = 120) {
  const container = document.getElementById('stars');
  container.innerHTML = '';
  for (let i = 0; i < count; i++) {
    const s = document.createElement('div');
    s.classList.add('star');
    s.style.left = Math.random() * window.innerWidth + 'px';
    s.style.top = Math.random() * window.innerHeight + 'px';
    s.style.animationDuration = 2 + Math.random() * 3 + 's';
    container.appendChild(s);
  }
}
createStars();
window.addEventListener('resize', () => { 
  createStars(); 
  canvas.width = innerWidth; 
  canvas.height = innerHeight; 
});


// --- Password ---
window.checkPassword = function() {
  const val = document.getElementById('password-input').value.trim().toLowerCase();
  if(val === 'suru'){
    document.getElementById('password-screen').style.display='none';
    bgMusic.volume = 0.5; 
    bgMusic.play().catch(()=>{});
    startCountdown();
  } else { 
    document.getElementById('password-error').style.display='block'; 
  }
};
document.getElementById('password-input').addEventListener('keypress', e=>{ if(e.key==='Enter') checkPassword(); });

// --- Countdown ---
function startCountdown(){
  const cd = document.getElementById('countdown-screen');
  cd.style.display='flex';
  let count = 3;
  cd.textContent = count;
  const interval = setInterval(()=>{
    count--;
    if(count>0) cd.textContent=count;
    else {
      cd.textContent="ğŸ‰ Surprise! ğŸ‰";
      clearInterval(interval);
      setTimeout(()=>{ cd.style.display='none'; startSequence(); },1500);
    }
  },1000);
}

// --- Show Section ---
function showSection(index){
  sections.forEach(id => document.getElementById(id).classList.remove('active'));
  const sec = document.getElementById(sections[index]);
  sec.classList.add('active');
  const vid = sec.querySelector('video');
  if(vid){ 
    const originalVol = bgMusic.volume; 
    bgMusic.volume = 0.1; 
    vid.play().catch(()=>{}); 
    vid.onended = () => { bgMusic.volume = originalVol; };
  }
}

// --- Typing ---
function startTyping(text, el, speed=30){
  return new Promise(resolve=>{
    let i=0; el.textContent='';
    function type(){ 
      if(i<text.length){ el.textContent+=text.charAt(i); i++; setTimeout(type,speed); } 
      else resolve(); 
    } 
    type();
  });
}

// --- Fireworks ---
function initFireworks(){
  setInterval(()=>{ createFirework(Math.random()*canvas.width, canvas.height/2); 
    document.getElementById('firework-sound').play().catch(()=>{}); 
  },800);
  requestAnimationFrame(animateFireworks);
}
function createFirework(x,y){ 
  for(let i=0;i<30;i++){ 
    particles.push({x,y,vx:(Math.random()-0.5)*6,vy:(Math.random()-1.5)*6,alpha:1,color:`hsl(${Math.random()*360},100%,70%)`}); 
  } 
}
function animateFireworks(){
  ctx.fillStyle="rgba(17,17,17,0.2)"; 
  ctx.fillRect(0,0,canvas.width,canvas.height);
  particles.forEach(p=>{
    p.x+=p.vx; p.y+=p.vy; p.alpha-=0.02; 
    ctx.fillStyle=p.color; ctx.globalAlpha=p.alpha; 
    ctx.beginPath(); ctx.arc(p.x,p.y,3,0,Math.PI*2); ctx.fill();
  });
  particles = particles.filter(p=>p.alpha>0); 
  ctx.globalAlpha=1;
  requestAnimationFrame(animateFireworks);
}

// --- Card Flip ---
function setupCard(){
  const card = document.querySelector('.card');
  const msg = document.getElementById('card-message');
  card.onclick = async () => {
    card.classList.add('open');
    const text = `Happy 20th Birthday, my love! â¤ï¸
Today is all about you. The one who makes my world brighter, my heart softer, and my life so, so beautiful. On your special day, I just want to remind you how deeply you mean to me. You are my biggest blessing, my safe place, and the reason behind my happiest smiles. ğŸ’•ğŸ’–
Your smile is my biggest happiness, your hugs are my favorite place, and your love is my favorite feeling. You make everything feel magical and I still canâ€™t believe I get to call you mine. ğŸ¥ºâ¤
May this year bring you endless joy, success, peace, and everything youâ€™ve ever dreamed of. Iâ€™ll always be right by your side cheering for you, loving you endlessly, and making every birthday feel as special as you are.ğŸ˜šğŸ¤—
Ab thoda Hindi ho jayeâ€¦
Happy Birthday mera shona, mera baby, mera pookie, mera cutie patootie, mera sabse pyaare insan! ğŸ˜˜â¤ï¸
Tumhara hona meri life ke sbse bade achievement sa feel hota hai. Abhi hmlog sath nhi hai. Na hm tumko hug krke tumko birthday wish kr skte but itna hamesh bharosa rakhna ki hm hmesha tumhare sath hai. Koi bhi situation kyu na ho, I'll always be there for youğŸ’–.
You are my comfort, my chaos, my laughter, and my calm all in one. Youâ€™re my best friend, my partner, my heartâ€™s favorite person. ğŸ’•
I know I irritate you sometimes ğŸ˜œ but trust me, Iâ€™ll keep doing that foreverğŸ˜š. Don't even think ki hm sudhar jaynge. Tum meri property ho. Samjhe ki nhi?ğŸ˜š
Once again, Happy Birthday, my babyyyyyyyyyyyyyyyyyy! ğŸ‚ğŸ‰
You deserve all the happiness in the world and I promise to love you a little more every single day.

Forever your girl,
Your Khushuâ¤ï¸ğŸ˜˜`;
    msg.textContent='';
    for(let i=0;i<text.length;i++){
      msg.textContent += text.charAt(i);
      msg.scrollTop = msg.scrollHeight;
      await new Promise(r=>setTimeout(r,30));
    }
    if(resolveCard) resolveCard(); // <-- Continue sequence
  };
}

// --- Memories Sequence ---
async function playMemories(){
  const items = document.querySelectorAll('#memories-sequence .memory-container');
  for(let el of items){
    items.forEach(e=>e.classList.remove('active'));
    el.classList.add('active');
    const media = el.querySelector('img, video');
    if(media.tagName==='VIDEO') await new Promise(r=>{ media.onended=r; media.play(); });
    else await new Promise(r=>setTimeout(r,3000));
  }
}

// --- Main Sequence ---
async function startSequence(){
  setupCard();

  // Birthday
  showSection(0); initFireworks();
  await startTyping("HAPPY BIRTHDAY!", document.getElementById("banner"),120);
  await startTyping("Happy birthday, my love! Every moment with you feels like a dream come true.You make my life brighter, my heart fuller and my days happier just by being you. I love you more than words can ever express â¤ï¸", document.getElementById("birthday-text"),30);
  await startTyping("ğŸ‚ğŸ‰ Love you forever! ğŸ‰ğŸ‚", document.getElementById("wishes-text"),50);
  await new Promise(r=>setTimeout(r,5000));

  // Video 1
  showSection(1); 
  const vid1 = document.querySelector('#message video'); 
  await new Promise(r=>{ vid1.onended=r; vid1.play(); });

  // Letter (card)
  showSection(2); 
  await new Promise(r=>{ resolveCard = r; }); // waits for card click and typing

  // Video 2
  showSection(3); 
  const vid2 = document.querySelector('#birthday-boy video'); 
  await new Promise(r=>{ vid2.onended=r; vid2.play(); });

  // Hot video
  showSection(4); 
  const vidHot = document.querySelector('#birthday-boy-hot video'); 
  await new Promise(r=>{ vidHot.onended=r; vidHot.play(); });

  // Memories
  showSection(5); 
  await playMemories();
}
</script>
</body>
</html>
